{
    "_comment": "This file contains the prompts used for validation of the SFDR data points. To add or modify prompts, edit this file accordingly.",
    "extendedDecimalTotalRevenueInEUR": {
        "prompt": "Extract the company's TOTAL REVENUE for the most recent full year and return it as a decimal number in EUR.\n\nWHAT COUNTS AS REVENUE (ACCEPT):\n- 'Revenue', 'Total revenue', 'Group revenue'\n- 'Net sales', 'Sales', 'Net turnover', 'Turnover'\n- 'Operating revenue', 'Revenue from contracts with customers'\n- German: 'Umsatzerlöse', 'Umsatz', 'Nettoerlöse'\n- French: 'Chiffre d’affaires'\n- Spanish/Portuguese: 'Ingresos', 'Ventas', 'Receita', 'Receitas'\n- Italian: 'Ricavi'\n- Dutch: 'Omzet'\n\nDO NOT CONFUSE WITH (REJECT):\n- Profit / operating profit / EBIT / EBITDA\n- Net income / result / profit for the year\n- Total income (banks/insurers) unless explicitly the revenue metric used as 'Total income' in their financial statements\n- Total assets / equity / cash flow\n\nWHERE TO LOOK (IMPORTANT):\n- Consolidated income statement / statement of profit or loss\n- Notes: 'Revenue' / 'Net sales' note\n- KPI summaries that clearly state 'Revenue/Net sales/Turnover'\n\nYEAR SELECTION:\n- Default: Choose the most recent FULL YEAR that appears in the context.\n- If a Comment is provided and it explicitly mentions a year, use THAT year in preference to the context.\n\nCURRENCY HANDLING (STRICT):\n- If revenue is given in EUR / € / '€m' / 'EUR million', extract it.\n- If revenue is given in another currency, still extract the number but ONLY if currency is explicit (USD, GBP, CHF, etc.). Do NOT convert currencies.\n\nSCALING (CRITICAL):\n- Detect and apply table scales: 'in millions', '€m', 'EUR m', 'in thousand', 'k', 'TEUR', 'MEUR'.\n- Apply scaling BEFORE returning the final number.\n\nTABLE RULES:\n- Prefer 'Total' / 'Group' / 'Consolidated' rows.\n- Do NOT sum segments unless a total is explicitly provided.\n\nRETURN RULES:\n- Return ONLY the numeric value (no currency, no units).\n- Use dot as decimal separator and remove thousand separators.\n- If no revenue-like metric can be confidently identified, return 'null'.\n\nContext:\n{context}\n\nComment (may be empty, may include year or FX explanation):\n{comment}"
    },




    "extendedDecimalEstimatedScope1GhgEmissionsInTonnes": {
        "prompt": "Extract the ESTIMATED Scope 1 greenhouse gas (GHG) emissions in tonnes from the following text.\n\nDefinition:\n- Scope 1 emissions are direct emissions from sources owned or controlled by the company (e.g., stationary combustion, mobile combustion, process emissions, company vehicles, on-site fuel use).\n- 'Estimated' means the text explicitly states the value is estimated, calculated, modeled, or approximated.\n\nReturn only ONE value: the estimated Scope 1 total for the most recent year.\n\nExtraction logic (STRICT ORDER):\n1) If an explicit ESTIMATED Scope 1 total exists (e.g., \"estimated Scope 1\", \"Scope 1 (estimated)\", \"estimated direct emissions\"):\n   - Extract that value.\n\n2) If NO explicit estimated total exists, but multiple ESTIMATED Scope 1 components are listed for the SAME year (e.g., stationary combustion, mobile combustion, process emissions, vehicles, etc.):\n   - Sum those estimated components.\n\n3) If Scope 1 values are given but NOT marked as estimated, return \"null\" (this datapoint is ONLY for estimated values).\n\n4) Return \"null\" if:\n   - The estimate status is unclear\n   - Components mix estimated and non-estimated values\n   - Components refer to different years\n   - Only partial components are given\n\nImportant constraints:\n- Do NOT mix estimated and non-estimated values.\n- Do NOT sum across different years.\n- Ignore intensities, ratios, per-unit metrics, or percentages.\n- Only accept absolute emissions.\n\nRanges:\n- If a range is explicitly given (e.g., \"100–120 tonnes\"), take the midpoint.\n\nUnit handling:\n- If values are in kg, convert to tonnes (1,000 kg = 1 tonne).\n- If values are in kt or thousand tonnes, multiply by 1,000.\n\nYear selection:\n- If multiple years are present, always select the most recent year.\n\nReturn format rules:\n- Return ONLY the numeric value.\n- No units, no text, no thousand separators.\n- Use a dot (.) as decimal separator.\n- If no valid estimated Scope 1 value can be determined, return \"null\".\n\nContext:\n{context}"
    },


    "extendedDecimalScope2GhgEmissionsInTonnes": {
        "prompt": "Extract the Scope 2 greenhouse gas (GHG) emissions in tonnes from the following text. Scope 2 emissions are indirect, energy-related GHG emissions from the generation of purchased electricity, steam, heating, or cooling, according to the GHG Protocol.\n\nMethod preference:\n- Prefer LOCATION-BASED values if both location-based and market-based are present.\n- Only use MARKET-BASED if no location-based Scope 2 value exists.\n\nReturn only ONE value: the total Scope 2 emissions for the most recent year.\n\nExtraction logic (STRICT ORDER):\n1) If an explicit Scope 2 total exists (e.g., \"Scope 2\", \"Total Scope 2\", \"Scope 2 (location-based)\", \"Scope 2 (market-based)\"):\n   - Choose the location-based total if available, otherwise the market-based total.\n   - Extract that value.\n\n2) If NO explicit total exists, but multiple Scope 2 components are listed (e.g., purchased electricity, district heat, steam, cooling, etc.) for the SAME method and SAME year:\n   - Prefer summing LOCATION-BASED components.\n   - Otherwise sum MARKET-BASED components.\n   - Return the summed value.\n\n3) Return \"null\" ONLY IF:\n   - Neither an explicit total nor a complete, method-consistent set of components can be identified, OR\n   - Components mix location-based and market-based, OR\n   - The year or scope of components is inconsistent or unclear.\n\nImportant constraints:\n- Do NOT mix location-based and market-based values.\n- Do NOT sum across different years.\n- Ignore intensities, ratios, or per-unit metrics.\n- Only use absolute emissions.\n\nUnit handling:\n- If values are in kg, convert to tonnes (1,000 kg = 1 tonne).\n- If values are in kt or thousand tonnes, multiply by 1,000.\n\nYear selection:\n- If multiple years are present, always select the most recent year.\n\nReturn format rules:\n- Return ONLY the numeric value.\n- No units, no text, no thousand separators.\n- Use a dot (.) as decimal separator.\n- If the final value is negative or cannot be reliably determined, return \"null\".\n\nContext:\n{context}"
    },

    "extendedDecimalFinancedScope1AndScope2Emissions": {
        "prompt": "Extract the total financed Scope 1 and Scope 2 greenhouse gas (GHG) emissions in tonnes as a decimal number from the following text.\n\nDefinition:\nFinanced Scope 1 and Scope 2 emissions represent the sum of the absolute Scope 1 (direct) and Scope 2 (energy-related indirect) GHG emissions of the companies financed by the reporting entity. These values should reflect the emissions attributable to the financed share of the underlying companies, in line with PCAF and SFDR guidelines.\n\nExtraction rules:\n- Extract the total combined value of financed Scope 1 and Scope 2 emissions expressed in tonnes of CO2e.\n- Only extract absolute emissions (not intensity values such as tCO2e per EUR invested or per revenue).\n- If multiple values are listed, extract the most explicit total representing the combined Scope 1 + Scope 2 financed emissions.\n- If the text reports separate financed Scope 1 and Scope 2 values, sum them only if a total is *not* explicitly provided.\n- If multiple annual values are present, always select the most recent year (e.g., choose 2024 over 2023).\n\nOutput rules:\n- Return only the numeric value, without units or text.\n- Use a dot as the decimal separator and no thousand separators.\n- If no financed Scope 1 + Scope 2 emissions value can be identified, return 'null'.\n\n{context}"
    },
    "extendedDecimalScope2GhgEmissionsMarketBasedInTonnes": {
        "prompt": "Extract the Scope 2 greenhouse gas (GHG) emissions in tonnes that are calculated using the market-based method from the following text. Scope 2 market-based emissions represent indirect GHG emissions from the generation of purchased electricity, steam, heating, cooling, or other externally generated energy sources, quantified using supplier-specific emission factors or contractual instruments, in accordance with the GHG Protocol.\n\nImportant instructions:\n- Return only ONE value: the total Scope 2 (market-based) emissions in tonnes.\n\nExtraction logic (STRICT ORDER):\n1) If an explicit total is provided (e.g., \"Scope 2 (market-based)\", \"Total Scope 2 (market-based)\", \"Scope 2 market based total\"), extract that value.\n2) If NO explicit total is provided, but the text lists multiple Scope 2 (market-based) subcomponents (e.g., purchased electricity, steam, district heat, cooling, etc.) that clearly belong to the SAME scope and SAME year, SUM these subcomponents and return the total.\n3) Return \"null\" ONLY IF:\n   - Neither an explicit total nor a complete set of Scope 2 (market-based) components can be identified, OR\n   - The components mix market-based and location-based values, OR\n   - It is unclear whether the components belong to the same scope or year.\n\nImportant constraints:\n- Do NOT use location-based values.\n- Only use values that are clearly labeled or described as market-based.\n- If only Scope 2 (location-based) is reported, return \"null\".\n- If units are in kg, convert to tonnes (1,000 kg = 1 tonne).\n- If multiple years are present, always select the most recent year.\n\nReturn format rules:\n- Return ONLY the numeric value.\n- No units, no text, no thousand separators.\n- Use a dot as the decimal separator.\n- If the final value is negative or cannot be reliably determined, return \"null\".\n\nContext:\n{context}"
    },

    "extendedDecimalScope2GhgEmissionsLocationBasedInTonnes": {
        "prompt": "Extract the company’s Scope 2 greenhouse gas (GHG) emissions — location-based — expressed in tonnes from the text below. Scope 2 (location-based) means indirect, energy-related GHG emissions using the grid/region average emission factors (per the GHG Protocol).\n\nImportant instructions:\n- Return only ONE value: the total Scope 2 (location-based) emissions in tonnes.\n\nExtraction logic (STRICT ORDER):\n1) If an explicit total is provided (e.g., \"Scope 2 (location-based) total\", \"Total Scope 2 (location)\", \"Scope 2 location-based\"), extract that value.\n2) If NO explicit total is provided, but the text lists multiple Scope 2 (location-based) subcomponents (e.g., electricity, heat, steam, cooling, etc.) that clearly belong to the SAME scope and SAME year, SUM these subcomponents and return the total.\n3) Return \"null\" ONLY IF:\n   - Neither an explicit total nor a complete set of Scope 2 (location-based) components can be identified, OR\n   - The components mix location-based and market-based values, OR\n   - It is unclear whether the components belong to the same scope or year.\n\nImportant constraints:\n- Do NOT mix market-based and location-based values.\n- Only use values that are clearly Scope 2 (location-based).\n- If only Scope 2 (market-based) is reported, return \"null\".\n- If units are in kg, convert to tonnes (1,000 kg = 1 tonne).\n- If multiple years are present, always select the most recent year.\n\nReturn format rules:\n- Return ONLY the numeric value.\n- No units, no text, no thousand separators.\n- Use a dot as decimal separator.\n- If the final value is negative or cannot be reliably determined, return \"null\".\n\nContext:\n{context}"
    },

    "extendedDecimalGhgIntensityScope2InTonnesPerMillionEURRevenue": {
        "prompt": "Extract the Scope 2 GHG intensity in tonnes per million EUR revenue as a decimal number.\n\nStep 1 — Try extraction:\n- If the text explicitly states a Scope 2 intensity in 't per million EUR revenue' (or equivalent), return that number.\n\nStep 2 — Otherwise calculate:\n- You MUST use the dependency value provided below.\n- The dependency already contains the validated, scaled total revenue in EUR (no units, no scaling needed).\n\nDEPENDENCY (validated revenue value):\n{depends_on}\n\nRules for dependency usage (STRICT):\n- If the dependency does NOT contain a usable numeric value for extendedDecimalTotalRevenueInEUR, return null.\n- Use revenue exactly as provided.\n\nCalculation (STRICT):\n- intensity = scope2_tonnes / (revenue_eur / 1000000)\n\nScope 2 emissions selection:\n- Prefer location-based and equity-share values if available.\n- Use the most recent year that matches the revenue year if the year is present; otherwise use the most recent Scope 2 year.\n- If you cannot confidently identify Scope 2 emissions in tonnes, return null.\n\nRounding / comparison:\n- Round the final result to 6 decimal places to avoid tiny floating point differences.\n- For comparison, the original value is: {value}\n\nReturn rules:\n- Return ONLY the numeric value (dot as decimal separator), or null.\n\nText:\n{context}",
        "depends_on": [
            "extendedDecimalTotalRevenueInEUR"
        ]
    },

    "extendedDecimalScope1And2GhgEmissionsInTonnes": {
        "prompt": "Extract the total Scope 1 and Scope 2 greenhouse gas (GHG) emissions in tonnes from the text below.\n\nTARGET METRIC DEFINITION:\n- Scope 1: Direct GHG emissions from sources owned or controlled by the company.\n- Scope 2: Indirect GHG emissions from purchased electricity, steam, heating, or cooling.\n- Preferred Scope 2 methodology: LOCATION-BASED (per GHG Protocol).\n- Fallback Scope 2 methodology: MARKET-BASED, only if location-based data is not provided.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent year that has ACTUAL NUMERIC VALUES in a table or statement.\n- Ignore document titles, captions, or headers like \"2024 report\" if the latest numeric column is 2023.\n- The year must be inferred from the column/row where the extracted numbers appear.\n\nINSTRUCTIONS (FOLLOW IN ORDER):\n1. PREFERRED METHOD (CALCULATION):\n   - If Scope 1 and Scope 2 (location-based) values exist for the same year, calculate:\n     Scope 1 + Scope 2 (LOCATION-BASED)\n\n2. SUBCOMPONENT SUMMATION (ALLOWED):\n   - If Scope 2 (location-based) is only given as subcomponents (e.g., electricity + district heat + steam) for the same year and no total is provided, SUM these subcomponents.\n\n3. METHODOLOGY FALLBACK:\n   - If no location-based Scope 2 exists, but market-based Scope 2 exists, use the market-based value instead.\n\n4. EXPLICIT TOTAL FALLBACK:\n   - If a total Scope 1+2 is explicitly reported for the correct year and a single methodology, extract it.\n\n5. EXCLUSIONS:\n   - Ignore Scope 3.\n   - Ignore intensities, ratios, targets, or percentages.\n   - Ignore totals that mix location-based and market-based Scope 2.\n\n6. NULL HANDLING:\n   - If neither a compliant calculation nor a compliant explicit total is available, return null.\n\nUNIT HANDLING:\n- Convert kt → *1000, million t → *1,000,000\n\nRETURN RULES:\n- Return ONLY the numeric value.\n- Use a dot (.) as decimal separator.\n- Remove thousand separators.\n- Return exactly one value or null.\n\nContext:\n{context}"
    },

    "extendedDecimalScope1And2And3GhgEmissionsInTonnes": {
        "prompt": "Extract or calculate the total combined Scope 1, Scope 2, and Scope 3 GHG emissions in tonnes.\n\nDEFINITION & METHODOLOGY:\n- Total GHG = Scope 1 + Scope 2 + Scope 3.\n- Preferred: Use Scope 2 LOCATION-BASED.\n- Fallback: If no location-based Scope 2 exists, it is acceptable to use Scope 2 MARKET-BASED.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent year that has ACTUAL NUMERIC VALUES in the table/statement where the emissions are reported.\n- Do NOT use a year mentioned only in titles/captions/headers (e.g., \"2024 report\") if the latest numeric column is 2023.\n- The chosen year must be supported by the numeric row/column you extract from.\n\nPRIORITY HIERARCHY (FOLLOW IN ORDER):\n1) EXPLICIT TOTAL (BEST):\n- If a single value explicitly states total Scope 1+2+3 for the chosen year, extract it.\n\n2) MANUAL SUMMATION (ALLOWED):\n- If no explicit total exists, sum components for the SAME year:\n  a) Scope 1\n  b) Scope 2 (LOCATION-BASED preferred; MARKET-BASED only if location-based not available)\n  c) Scope 3 (use 'Total Scope 3' if present; otherwise sum Scope 3 categories ONLY if clearly complete and for same year)\n\n3) SCOPE 2 SUBCOMPONENT SUMMATION (ALLOWED):\n- If Scope 2 is not given as a total but only as subcomponents (e.g., purchased electricity + district heat + steam/cooling) for the same year, SUM those subcomponents to get Scope 2.\n\nSCALING & UNITS:\n- Convert all units to absolute tonnes:\n  - kt / thousand tonnes -> multiply by 1,000\n  - million tonnes -> multiply by 1,000,000\n  - kg -> divide by 1,000\n\nEXCLUSIONS (STRICT):\n- Ignore intensity metrics, ratios, targets, percentages.\n- Ignore values that mix methodologies (e.g., Scope 2 location-based + market-based combined).\n\nNULL HANDLING:\n- Return 'null' if any of Scope 1, Scope 2 (chosen method), or Scope 3 is missing and no explicit total exists.\n\nRETURN RULES:\n- Return ONLY the numeric value.\n- Use a dot (.) as decimal separator.\n- Remove thousand separators.\n- Return exactly one value or null.\n\nCONTEXT:\n{context}"
    },


    "extendedDecimalScope1And2GhgEmissionsMarketBasedInTonnes": {
        "prompt": "Extract or calculate the combined total of Scope 1 and Scope 2 (MARKET-BASED) emissions in tonnes.\n\nPriority Logic (STRICT HIERARCHY):\n1. Priority 1 (Explicit Total): Scan the text for an explicit total of 'Scope 1 + 2' or 'Total operational emissions' that is clearly stated as market-based. If present, extract it.\n2. Priority 2 (Manual Summation): Only if no explicit total is found, extract Scope 1 and Scope 2 (market-based) for the SAME year and sum them.\n\nMethodology & Selection:\n- Method: Always use Scope 2 MARKET-BASED. Ignore location-based values completely.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent year that has ACTUAL NUMERIC VALUES in the table or text.\n- Do NOT select a year that appears only in a table title, caption, or heading (e.g. 'Market-Based 2024') if the latest numeric column is 2023.\n- The selected year must have numeric values for Scope 1 and/or Scope 2 market-based.\n\nUnit Scaling:\n- Convert all values to absolute tonnes (kt or thousand tonnes ×1000, million tonnes ×1000000, kg ÷1000).\n\nReturn rules:\n- Return ONLY the numeric value (no units, no text).\n- Use a dot (.) as the decimal separator and remove thousand separators.\n- If required components are missing and no explicit total exists, return 'null'.\n\nValidation Task:\nIn your reasoning, state whether you used an Explicit Total or Manual Summation and which year was selected.\n\n{context}"
    },

    "extendedDecimalScope1And2GhgEmissionsLocationBasedInTonnes": {
        "prompt": "Extract or calculate the combined total of Scope 1 and Scope 2 (LOCATION-BASED) greenhouse gas (GHG) emissions in tonnes.\n\nDefinitions:\n- Scope 1: Direct emissions from sources owned/controlled by the company.\n- Scope 2 (location-based): Indirect emissions from purchased electricity/steam/heat/cooling using grid-average emission factors.\n\nPriority Logic (STRICT HIERARCHY):\n1. Priority 1 (Explicit Total): If an explicit total for 'Scope 1 + Scope 2 (location-based)' / 'Total Scope 1 & 2 (location-based)' is provided, extract it.\n2. Priority 2 (Manual Summation): Only if no explicit total exists, extract Scope 1 and Scope 2 (LOCATION-BASED) for the SAME year and sum them.\n\nMethodology rules:\n- Use Scope 2 LOCATION-BASED only. Ignore market-based Scope 2 values.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent year that has ACTUAL NUMERIC VALUES for the needed fields.\n- Do NOT select a year that appears only in a table title/caption/heading if the latest numeric column is an earlier year.\n- When summing, Scope 1 and Scope 2 (location-based) must come from the SAME reporting year.\n\nUnit handling:\n- Accept tonnes (t, tCO2e).\n- If kg is used, convert to tonnes (÷ 1000).\n- If kt/thousand tonnes is used, convert to tonnes (× 1000).\n- If million tonnes is used, convert to tonnes (× 1,000,000).\n\nExclusions:\n- Ignore Scope 3.\n- Ignore intensity metrics, ratios, percentages, targets.\n\nReturn rules:\n- Return ONLY the numeric value (no units, no text).\n- Use a dot as decimal separator and remove thousand separators.\n- If either Scope 1 or Scope 2 (location-based) is missing and no explicit total is available, return 'null'.\n\nValidation Task:\nIn your reasoning, state whether you used an Explicit Total or Manual Summation and which year was selected.\n\n{context}"
    },

    "extendedDecimalScope1And2And3GhgEmissionsMarketBasedInTonnes": {
        "prompt": "Extract or calculate the combined total of Scope 1, Scope 2 (MARKET-BASED), and Scope 3 emissions in tonnes.\n\nPriority Logic (STRICT HIERARCHY):\n1) Priority 1 (Explicit Total): If an explicit total for 'Scope 1, 2 and 3' / 'Total GHG emissions' / 'Total carbon footprint' is provided AND it clearly uses market-based for Scope 2 (explicitly labeled or clearly implied by the table/section), extract it.\n2) Priority 2 (Manual Summation): Only if no compliant explicit total exists, identify Scope 1, Scope 2 (market-based), and Total Scope 3 for the SAME year and sum them.\n\nMethodology rules:\n- Always use MARKET-BASED for Scope 2. Ignore location-based Scope 2 values.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent reporting year that has ACTUAL NUMERIC VALUES for Scope 1, Scope 2 (market-based), and Scope 3.\n- Do NOT select a year that appears only in a table title/caption/heading if the latest numeric column is an earlier year.\n- When summing, all components must come from the SAME year.\n\nUnit scaling:\n- Convert to absolute tonnes: kt/thousand tonnes × 1,000; million tonnes × 1,000,000; kg ÷ 1,000.\n\nExclusions:\n- Ignore intensity metrics, ratios, percentages, targets.\n- Ignore totals that mix market-based and location-based Scope 2.\n\nReturn rules:\n- Return ONLY the numeric value (no units, no text).\n- Use a dot as decimal separator; remove thousand separators.\n- If any component (S1, S2 market-based, or S3) is missing for the selected year and no compliant explicit total exists, return 'null'.\n\nValidation Task:\nIn your reasoning, state whether you used an Explicit Total or Manual Summation and which year was selected.\n\n{context}"
    },

    "extendedDecimalScope1And2And3GhgEmissionsLocationBasedInTonnes": {
        "prompt": "Extract or calculate the combined total of Scope 1, Scope 2 (LOCATION-BASED), and Scope 3 GHG emissions in tonnes.\n\nMethodology (STRICT):\n- Mandatory: Use Scope 2 LOCATION-BASED. If no location-based Scope 2 value is reported anywhere in the context, return 'null'.\n- Ignore totals based solely on market-based Scope 2.\n\nPriority hierarchy:\n1) Explicit Location-based Total: If an explicit total for 'Scope 1, 2 (location-based) and 3' / 'Total GHG (location-based)' exists, extract it.\n2) Manual Summation: Only if no explicit total exists, sum Scope 1 + Scope 2 (location-based) + Scope 3 for the SAME year.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent reporting year that has ACTUAL NUMERIC VALUES for Scope 1, Scope 2 (location-based), and Scope 3.\n- Do NOT select a year that appears only in a table title/caption/heading if the latest numeric column is an earlier year.\n- When summing, all components must come from the SAME year.\n\nScope 3 handling:\n- Prefer an explicit 'Total Scope 3'.\n- Only if no 'Total Scope 3' exists, sum Scope 3 categories for the same year.\n\nUnit scaling:\n- Convert to absolute tonnes: kt/thousand tonnes × 1,000; million tonnes × 1,000,000; kg ÷ 1,000.\n\nExclusions:\n- Ignore intensity metrics, ratios, percentages, targets.\n- Ignore totals that mix location-based and market-based Scope 2.\n\nReturn rules:\n- Return ONLY the numeric value (no units, no text).\n- Use a dot as decimal separator; remove thousand separators.\n- If Scope 1, Scope 2 (location-based), or Scope 3 is missing for the selected year and no compliant explicit total exists, return 'null'.\n\nValidation Task:\nIn your reasoning, explicitly state that Location-based Scope 2 was used (market-based ignored), and whether you used Explicit Total or Manual Summation, including the selected year.\n\n{context}"
    },



    "extendedDecimalScope4GhgEmissionsInTonnes": {
        "prompt": "Extract the absolute Scope 4 greenhouse gas (GHG) emissions in tonnes as a decimal number from the following text.\n\nDefinition (STRICT):\n- Scope 4 = 'avoided emissions' / 'emissions avoided' / 'emissions saved' / 'carbon handprint' explicitly attributable to the company's products/services causing emissions reductions outside the company's value chain.\n- Only accept values explicitly framed as avoided/saved/handprint (NOT Scope 1/2/3, NOT 'reductions in our own emissions', NOT targets).\n\nTerminology matching:\n- Match phrases such as: 'Scope 4', 'avoided emissions', 'emissions avoided', 'emissions saved', 'customer emissions avoided', 'emissions avoided by customers', 'handprint', 'carbon handprint', 'enabled/avoided emissions'.\n\nYEAR SELECTION (CRITICAL):\n- Select the most recent reporting year that has an ACTUAL NUMERIC avoided-emissions value in the text/table.\n- Do NOT select a year that appears only in a table title/caption/heading if the latest numeric column is an earlier year.\n- If multiple avoided-emissions values exist, pick the most recent year with a clear 'Total' avoided-emissions figure.\n\nWhat to ignore (IMPORTANT):\n- Ignore intensity metrics, ratios, percentages, per-unit values.\n- Ignore 'our emissions reduced' / 'reduction vs baseline' unless it is explicitly 'avoided emissions' outside the value chain.\n- Ignore targets/ambitions ('will avoid', 'aim to avoid') unless an achieved historical value is clearly reported.\n\nUnit handling:\n- Accept only absolute emissions values in t / tonnes / tCO2e / metric tons CO2e.\n- Convert if needed: kg -> tonnes by dividing by 1,000; kt -> multiply by 1,000; Mt/million tonnes -> multiply by 1,000,000.\n\nReturn rules:\n- Return only the numeric value.\n- Use a dot (.) as decimal separator; remove thousand separators.\n- If multiple values exist, prioritize an explicit 'Total avoided emissions' / 'Total handprint'.\n- If no Scope 4 / avoided emissions value is explicitly stated, return 'null'.\n\n{context}"
    },

    "extendedDecimalEnterpriseValueInEUR": {
        "prompt": "Extract the Enterprise Value (EV) as a decimal number from the following text.\n\nDEFINITION (CRITICAL — EU REGULATORY):\n- Enterprise Value is defined as the sum, at fiscal year-end, of:\n  - the market capitalisation of ordinary shares\n  - the market capitalisation of preferred shares\n  - the book value of total debt\n  - and non-controlling interests\n- IMPORTANT: Do NOT deduct cash or cash equivalents.\n- This follows Regulation (EU) 2022/1288, Annex I, top (4).\n\nExtraction Logic:\n- If an Enterprise Value is explicitly stated, extract it.\n- Otherwise, construct it by summing the available components listed above.\n- If only Market Capitalisation is available and no other components are given, return the Market Capitalisation as the Enterprise Value.\n- Do NOT invent or assume missing components.\n\nCurrency Handling (CRITICAL):\n- **Objective:** We prefer EUR, but we MUST extract a value even if the report is in USD, GBP, JPY, etc.\n- **Priority 1 (EUR):** If an EV explicitly stated in Euros (€) exists, extract that value.\n- **Priority 2 (Reporting Currency):** If NO Euro value is found, extract the EV in the company's primary reporting currency. Do NOT return 'null' just because it is not EUR.\n\nScaling Instructions:\n- Always convert the extracted value to the full numeric amount (units of 1).\n- 'Million', 'mn', 'm', 'Mio.' -> multiply value by 1,000,000\n- 'Billion', 'bn', 'b', 'Mrd.' -> multiply value by 1,000,000,000\n- 'Trillion', 'tn', 't' -> multiply value by 1,000,000,000,000\n\nPeriod / Year Selection:\n- Default: Select the value for the most recent reporting year/period available in the Context.\n- If a Comment is provided and it explicitly mentions a year or period, use THAT year/period in preference to the Context.\n\nReturn rules:\n- **Format:** Return only the numeric value. No currency symbols or text.\n- **Separators:** Use a dot (.) as the decimal separator. Remove thousand separators.\n- **Null Handling:** Return 'null' ONLY if neither an explicit EV nor at least one valid component (e.g., market capitalisation) can be identified.\n\nContext:\n{context}\n\nComment (may be empty, may include year or FX explanation):\n{comment}"
    },


    "extendedDecimalCarbonFootprintInTonnesPerMillionEUREnterpriseValue": {
        "prompt": "Extract or calculate the Carbon Footprint Intensity as tonnes CO2e per MILLION of Enterprise Value (EV).\n\nDEPENDENCY_BUNDLE (do NOT ignore):\n{depends_on}\n\nStep 1 — Direct extraction (preferred):\n- If the text explicitly reports an EV-based intensity (e.g., 'tCO2e per €m EV' or equivalent), extract and return it.\n\nStep 2 — Otherwise calculate (STRICT):\n- You MUST use the dependency value for EV if available.\n- If dependency does NOT contain a usable numeric EV value, return null (do not guess EV).\n\nEV rules:\n- EV is provided by dependency as a full numeric amount in the stated currency (already scaled).\n- Convert EV to \"per MILLION\" by dividing EV by 1,000,000 in the denominator:\n  intensity = total_ghg_tonnes / (EV / 1000000)\n\nEmissions selection:\n- Prefer total GHG emissions covering Scope 1 + Scope 2 + Scope 3.\n- If only Scope 1+2 exists, use it ONLY if no total S1+S2+S3 total is available.\n- Use the most recent year available; if EV year is known in dependency, prefer matching that year.\n\nCurrency handling:\n- Prefer EUR-based EV intensities if explicitly present.\n- Otherwise accept any currency (USD/GBP/CHF/etc.). Do NOT convert.\n\nOutput rules:\n- Return ONLY the numeric value.\n- Dot as decimal separator; remove thousand separators.\n- Round the final result to 6 decimal places.\n- If extraction or calculation is not possible, return null.\n\nText:\n{context}",
          "depends_on": [
            "extendedDecimalEnterpriseValueInEUR"
          ]
    },

    "extendedDecimalGhgIntensityInTonnesPerMillionEURRevenue": {
        "prompt": "Extract or calculate the GHG Emissions Intensity as tonnes CO2e per MILLION EUR of Total Revenue.\n\nDEPENDENCY_BUNDLE (do NOT ignore):\n{depends_on}\n\nDEFINITION (STRICT):\n- Numerator (tonnes CO2e): Total GHG emissions covering Scope 1 + Scope 2 (location-based) + Scope 3.\n- Denominator: Total Revenue in EUR, expressed per MILLION EUR.\n\nStep 1 — Direct extraction (preferred):\n- If the text explicitly reports an intensity that is:\n  (a) revenue-based (e.g., tCO2e per €m revenue / per EUR million revenue / per million EUR turnover)\n  (b) explicitly covers Scope 1 + Scope 2 (location-based) + Scope 3 (as a total)\n  (c) the revenue denominator is explicitly EUR (EUR/€)\n  then extract and return the reported numeric value.\n\nStep 2 — Otherwise calculate from dependencies (STRICT):\n- You MUST use dependency values for revenue and emissions if available.\n\nRequired dependencies:\n- total_ghg_tonnes: a usable numeric value for Scope 1+2(location-based)+3 total emissions in tonnes CO2e\n- total_revenue_eur: a usable numeric value for Total Revenue in EUR (already scaled to absolute EUR amount)\n\nIf either dependency is missing or not a usable numeric value, return null.\n\nCalculation:\n- Convert revenue to \"per MILLION\" by dividing revenue by 1,000,000 in the denominator:\n  intensity = total_ghg_tonnes / (total_revenue_eur / 1000000)\n\nYear alignment:\n- Prefer the most recent year available.\n- If both dependencies include a year, prefer matching years; if mismatch cannot be resolved, still use the most recent pair available. Do NOT guess missing years.\n\nCurrency rules (STRICT):\n- Revenue MUST be EUR. If dependency revenue is not explicitly EUR, return null.\n- Do NOT convert currencies.\n\nEmissions selection rules (STRICT):\n- Prefer a single stated total S1+S2(location-based)+S3 value.\n- If only Scope 1+2 is available (without Scope 3), return null.\n\nOutput rules:\n- Return ONLY the numeric value.\n- Dot as decimal separator; remove thousand separators.\n- Round the final result to 6 decimal places.\n- If extraction or calculation is not possible, return null.\n\nText:\n{context}",
          "depends_on": [
            "extendedDecimalTotalRevenueInEUR",
            "extendedDecimalScope1And2And3GhgEmissionsInTonnes"
          ]
    }



}

